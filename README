Author: Ken Cochrane
Fork of: http://minidetector.googlecode.com
Fork Description: I reorganized the code, added caching, and made a few tweaks here and there.
Description: Django middleware and view decorator to detect phones and small-screen devices
Version: 0.1.6
Last Update: 9/30/2011

Requirements:
-------------
Django 1.1 or newer
Django caching to be enabled if you want to cache the objects

How to use:
-----------
Using django-mobi is very simple. Simply place the mobi package into your project's path, and then do one of the following:


Using the mobi.MobileDetectionMiddleware Middleware
---------------------------------------------------
This middleware will scan all incoming requests to see if it is a mobile device. If it is it will set the request.mobile property to True.

To use all you have to do is add mobi.MobileDetectionMiddleware to your MIDDLEWARE_CLASSES tuple in your settings.py

Then in your view you can check request.mobile - if it's True then treat it like a small screen device. If it's False then it's probably a desktop browser, or a spider or something else.

If you want to have some items not triggered by the middleware (for example iPad) then add a settings called MOBI_USER_AGENT_IGNORE_LIST and add the item to the list.
 
MOBI_USER_AGENT_IGNORE_LIST = ['ipad',]

If you want to distinguish tablet devices from phones, then set MOBI_DETECT_TABLET = True and use request.tablet attribute

{% if not request.mobile or request.tablet %}
	<p>This section enabled only for descktop and tablets</p>
{% endif %}




Using the mobi.MobileRedirectMiddleware Middleware
---------------------------------------------------
This middleware will scan all incoming requests to see if it is a mobile device, if so it will redirect the request to a different URL. This is good if you want to force all mobile traffic to a mobile only version of your site.

To use all you have to do is add mobi.MobileRedirectMiddleware to your MIDDLEWARE_CLASSES tuple in your settings.py, and also add MOBI_REDIRECT_URL = "http://example.mobi" where http://example.mobi is the website you want to redirect all mobile traffic.


Not using the Middleware
------------------------
If you only have certain views that need the distinction, you can choose not to search every request you receive. All you need to do is wrap the relevant views like this:

from mobi.decorators import detect_mobile

@detect_mobile
def my_mobile_view(request):
    if request.mobile:
        #do something with mobile

